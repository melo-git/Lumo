import{useState as e,useEffect as t,useContext as n,useMemo as r,useCallback as l}from"react";import{a9 as a,ar as s,ae as o,y as i,cv as c,s as d,cw as u,cx as f,cr as m}from"./SignRequestScreen-NOqdMm22.mjs";import{P as p}from"./privy-context-V2csHgUI.mjs";import{styled as w}from"styled-components";import{u as g}from"./internal-context-LlMdpfkb.mjs";const v=n=>{let[r,l]=e("auto");return t((()=>{let e=new ResizeObserver((e=>{l(e[0]?.contentRect.height??"auto")}));return n.current&&e.observe(n.current),()=>{n.current&&e.unobserve(n.current)}}),[n.current]),r};function y(e){let{logout:t}=n(p);return a("logout",e),{logout:t}}const W=/*#__PURE__*/w.div.withConfig({displayName:"Column",componentId:"sc-cfc52180-0"})(["display:flex;flex-direction:column;"]);function h(e){let{login:t}=n(p);return a("login",e),{login:t}}function x(e){let{connectWallet:t}=n(p);return a("connectWallet",e),{connectWallet:t}}const b=e=>{a("fundWallet",e);let{fundWallet:t}=g();return{fundWallet:({address:e,options:n})=>t(e,n)}},C=()=>{let e=s(),{wallets:n}=o(),{connectors:a}=g(),p=r((()=>a.filter(i).flatMap((e=>e.wallets))),[a]),w=c((e=>e.wallet));t((()=>{if(!e.id)return;let t=d.get(u(e.id));c.setState({wallet:t})}),[e.id]);let v=r((()=>{if(!w)return;let[,e]=w.split(":");return n.find((t=>t.address===e))||p.find((t=>t.address===e))}),[w,n,p]),y=r((()=>v?"ethereum"===v.type?v.chainId:"solana":void 0),[v]);return{connect:async t=>{t?.reset&&(d.del(u(e.id)),c.setState({wallet:void 0}));let{wallet:r}=await f();if(!r)return{};let[,l]=r.split(":"),a=n.find((e=>e.address===l));if(a)return{wallet:a,network:a.chainId};let s=p.find((e=>e.address===l));return s?{wallet:s,network:"solana"}:{}},setActiveWallet:l((t=>{m({address:t.address,client:t.walletClientType,appId:e.id})}),[e.id]),wallet:v,network:y}};export{W as C,y as a,h as b,x as c,b as d,C as e,v as u};
